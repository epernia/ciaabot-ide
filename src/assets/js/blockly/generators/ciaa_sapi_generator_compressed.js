"use strict";goog.provide("Blockly.CiaaSapi"),goog.require("Blockly.Generator"),Blockly.CiaaSapi=new Blockly.Generator("CiaaSapi"),Blockly.CiaaSapi.addReservedWords("setup,loop,if,else,for,switch,case,while,do,break,continue,return,goto,define,include,HIGH,LOW,INPUT,OUTPUT,INPUT_PULLUP,true,false,interger, constants,floating,point,void,bookean,char,unsigned,byte,int,word,long,float,double,string,String,array,static, volatile,const,sizeof,pinMode,digitalWrite,digitalRead,analogReference,analogRead,analogWrite,tone,noTone,shiftOut,shitIn,pulseIn,millis,micros,delay,delayMicroseconds,min,max,abs,constrain,map,pow,sqrt,sin,cos,tan,randomSeed,random,lowByte,highByte,bitRead,bitWrite,bitSet,bitClear,bit,attachInterrupt,detachInterrupt,interrupts,noInterrupts"),Blockly.CiaaSapi.ORDER_ATOMIC=0,Blockly.CiaaSapi.ORDER_UNARY_POSTFIX=1,Blockly.CiaaSapi.ORDER_UNARY_PREFIX=2,Blockly.CiaaSapi.ORDER_MULTIPLICATIVE=3,Blockly.CiaaSapi.ORDER_ADDITIVE=4,Blockly.CiaaSapi.ORDER_SHIFT=5,Blockly.CiaaSapi.ORDER_RELATIONAL=6,Blockly.CiaaSapi.ORDER_EQUALITY=7,Blockly.CiaaSapi.ORDER_BITWISE_AND=8,Blockly.CiaaSapi.ORDER_BITWISE_XOR=9,Blockly.CiaaSapi.ORDER_BITWISE_OR=10,Blockly.CiaaSapi.ORDER_LOGICAL_AND=11,Blockly.CiaaSapi.ORDER_LOGICAL_OR=12,Blockly.CiaaSapi.ORDER_CONDITIONAL=13,Blockly.CiaaSapi.ORDER_ASSIGNMENT=14,Blockly.CiaaSapi.ORDER_NONE=99;var profile={edu_ciaa:{description:"EduCiaa board",digital:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]],leds:[["Led 1","LED1"],["Led 2","LED2"],["Led 3","LED3"],["Led Rojo","LEDR"],["Led Verde","LEDG"],["Led Azul","LEDB"]],buttons:[["Tecla 1","TEC1"],["Tecla 2","TEC2"],["Tecla 3","TEC3"],["Tecla 4","TEC4"]],analog:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]],serial:9600},ciaa:{description:"Ciaa board"}};profile.default=profile.edu_ciaa,Blockly.CiaaSapi.init=function(workspace){Blockly.CiaaSapi.definitions_=Object.create(null),Blockly.CiaaSapi.definitions_["sapi-header-file"]='#include "sapi.h"',Blockly.CiaaSapi.setups_=Object.create(null),Blockly.CiaaSapi.variableDB_?Blockly.CiaaSapi.variableDB_.reset():Blockly.CiaaSapi.variableDB_=new Blockly.Names(Blockly.CiaaSapi.RESERVED_WORDS_);for(var defvars=[],variables=Blockly.Variables.allVariables(workspace),x=0;x<variables.length;x++)defvars[x]="int "+Blockly.CiaaSapi.variableDB_.getName(variables[x],Blockly.Variables.NAME_TYPE)+";\n";Blockly.CiaaSapi.definitions_.variables=defvars.join("\n")},Blockly.CiaaSapi.finish=function(code){code="  "+code.replace(/\n/g,"\n  ");var userCode=code.replace(/\n\s+$/,"\n");code="void main(void) \n{\n   // Board Initialization \n   boardConfig(); \n\n",code+="   // Enable tick counting every 1ms \n   tickConfig(1, 0); \n\n",code+="   // User generated setups \n   setup(); \n\n",code+="   while(1) {\n    "+userCode+"\n  }\n}";var imports=[],definitions=[];for(var name in Blockly.CiaaSapi.definitions_){var def=Blockly.CiaaSapi.definitions_[name];def.match(/^#include/)?imports.push(def):definitions.push(def)}var setups=[];for(var name in Blockly.CiaaSapi.setups_)setups.push(Blockly.CiaaSapi.setups_[name]);return(imports.join("\n")+"\n\n"+definitions.join("\n")+"\n void setup(void) \n{\n  "+setups.join("\n  ")+"\n}\n\n").replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+code},Blockly.CiaaSapi.scrubNakedValue=function(line){return line+";\n"},Blockly.CiaaSapi.quote_=function(string){return'"'+(string=string.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/\$/g,"\\$").replace(/'/g,"\\'"))+'"'},Blockly.CiaaSapi.scrub_=function(block,code){if(null===code)return"";var commentCode="";if(!block.outputConnection||!block.outputConnection.targetConnection){var comment=block.getCommentText();comment&&(commentCode+=Blockly.CiaaSapi.prefixLines(comment,"// ")+"\n");for(var x=0;x<block.inputList.length;x++)if(block.inputList[x].type==Blockly.INPUT_VALUE){var childBlock=block.inputList[x].connection.targetBlock();if(childBlock){var comment=Blockly.CiaaSapi.allNestedComments(childBlock);comment&&(commentCode+=Blockly.CiaaSapi.prefixLines(comment,"// "))}}}var nextBlock=block.nextConnection&&block.nextConnection.targetBlock();return commentCode+code+Blockly.CiaaSapi.blockToCode(nextBlock)},goog.provide("Blockly.CiaaSapi.base"),goog.require("Blockly.CiaaSapi"),Blockly.CiaaSapi.ciaa_sapi_blocking_delay=function(){return"delay("+(Blockly.CiaaSapi.valueToCode(this,"delay_time",Blockly.CiaaSapi.ORDER_ATOMIC)||"2000")+");\n"},Blockly.CiaaSapi.ciaa_sapi_inaccurate_blocking_delay=function(block){return"delayInaccurate("+Blockly.CiaaSapi.valueToCode(block,"delay_ms",Blockly.CiaaSapi.ORDER_ATOMIC)+");\n"},Blockly.CiaaSapi.ciaa_sapi_gpio_write=function(block){var dropdown_pin_option=block.getFieldValue("pin_option"),dropdown_value_option=(Blockly.CiaaSapi.valueToCode(block,"pin",Blockly.CiaaSapi.ORDER_ATOMIC),block.getFieldValue("value_option"));Blockly.CiaaSapi.valueToCode(block,"value",Blockly.CiaaSapi.ORDER_ATOMIC);return Blockly.CiaaSapi.setups_["gpio-enable"]="gpioConfig(0, GPIO_ENABLE );",Blockly.CiaaSapi.setups_["gpio-config-output"+dropdown_pin_option]="gpioConfig("+dropdown_pin_option+", GPIO_OUTPUT );","gpioWrite("+dropdown_pin_option+", "+dropdown_value_option+");\n"},goog.provide("Blockly.CiaaSapi.math"),goog.require("Blockly.CiaaSapi"),Blockly.CiaaSapi.math_number=function(){var code=window.parseFloat(this.getFieldValue("NUM"));return[code,code<0?Blockly.CiaaSapi.ORDER_UNARY_PREFIX:Blockly.CiaaSapi.ORDER_ATOMIC]},Blockly.CiaaSapi.math_arithmetic=function(){var code,mode=this.getFieldValue("OP"),tuple=Blockly.CiaaSapi.math_arithmetic.OPERATORS[mode],operator=tuple[0],order=tuple[1],argument0=Blockly.CiaaSapi.valueToCode(this,"A",order)||"0",argument1=Blockly.CiaaSapi.valueToCode(this,"B",order)||"0";return operator?(code=argument0+operator+argument1,[code,order]):(code="Math.pow("+argument0+", "+argument1+")",[code,Blockly.CiaaSapi.ORDER_UNARY_POSTFIX])},Blockly.CiaaSapi.math_arithmetic.OPERATORS={ADD:[" + ",Blockly.CiaaSapi.ORDER_ADDITIVE],MINUS:[" - ",Blockly.CiaaSapi.ORDER_ADDITIVE],MULTIPLY:[" * ",Blockly.CiaaSapi.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Blockly.CiaaSapi.ORDER_MULTIPLICATIVE],POWER:[null,Blockly.CiaaSapi.ORDER_NONE]};